-- PROCEDURE: public.updateOrderStatus(json)

-- DROP PROCEDURE public."updateOrderStatus"(json);

CREATE OR REPLACE PROCEDURE public."updateOrderStatus"(
	orderdetails json)
LANGUAGE 'plpgsql'
AS $BODY$
DECLARE
    jsonOrder json := orderDetails::json;
  
--arrayItems json := jsonOrder->>'orderId';
--arrayItems json := jsonOrder->>'orderStatus';
--i json;
--declare orderId bigint;
BEGIN
update public."Orders" set "orderStatusID" = (SELECT "orderStatusID" FROM public."OrderStatus" where Trim("orderStatusName") = jsonOrder->>'orderStatus') where "orderID" = cast(jsonOrder->>'orderId' as integer);
    EXCEPTION
        WHEN Others Then
        
		raise exception 'error';
  END;
$BODY$;
